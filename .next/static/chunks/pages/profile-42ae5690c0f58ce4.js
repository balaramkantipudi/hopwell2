(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(6720)}])},3874:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.86bc5614.png",height:200,width:1100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAAElBMVEWxtLmgmlCTj0mqn0GdmmjdzF74kXbtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEUlEQVR4nGNgYGBgYWJkZgUAADMAENwjFK0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:1}},9044:function(e,t,s){"use strict";var r=s(5893),i=s(1664),a=s.n(i),l=s(5675),n=s.n(l),d=s(3197),c=s(3874);t.Z=()=>(0,r.jsx)("footer",{className:"bg-yellow-50 border-t border-base-content/10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-24",children:(0,r.jsxs)("div",{className:" flex lg:items-start md:flex-row md:flex-nowrap flex-wrap flex-col",children:[(0,r.jsxs)("div",{className:"w-64 flex-shrink-0 md:mx-0 mx-auto text-center md:text-left",children:[(0,r.jsxs)(a(),{href:"/#","aria-current":"page",className:"flex gap-2 justify-center md:justify-start items-center",children:[(0,r.jsx)(n(),{src:c.Z,alt:"ShipFast logo",priority:!0,className:"w-6 h-6",width:24,height:24}),(0,r.jsx)("strong",{className:"font-extrabold tracking-tight text-base md:text-lg",children:"Hopwell"})]}),(0,r.jsx)("p",{className:"mt-3 text-sm text-base-content/80 text-gray-500",children:"Travel made so easy, you already plan your next trip."}),(0,r.jsxs)("p",{className:"mt-3 text-sm text-base-content/60 text-gray-500",children:["Copyright \xa9 ",new Date().getFullYear()," - All rights reserved"]})]}),(0,r.jsxs)("div",{className:"flex-grow flex flex-wrap justify-center -mb-10 md:mt-0 mt-10 text-center ",children:[(0,r.jsxs)("div",{className:"lg:w-1/3 md:w-1/2 w-full px-4",children:[(0,r.jsx)("div",{className:"footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3 text-gray-700",children:"LINKS"}),(0,r.jsx)("div",{className:"flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm",children:d.Z.mailgun.supportEmail&&(0,r.jsx)("a",{href:"mailto:".concat(d.Z.mailgun.supportEmail),target:"_blank",className:"link link-hover","aria-label":"Contact Support",children:"Support"})})]}),(0,r.jsxs)("div",{className:"lg:w-1/3 md:w-1/2 w-full px-4",children:[(0,r.jsx)("div",{className:"footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3 text-gray-700",children:"LEGAL"}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm",children:[(0,r.jsx)(a(),{href:"/tos",className:"link link-hover",children:"Terms of services"}),(0,r.jsx)(a(),{href:"/privacy-policy",className:"link link-hover",children:"Privacy policy"})]})]})]})]})})})},4345:function(e,t,s){"use strict";s.d(t,{Z:function(){return components_TripHeader}});var r=s(5893),i=s(1163),a=s(1664),l=s.n(a),n=s(5675),d=s.n(n),c=s(8998),o=s(3874);s(7294),s(5201);var components_TripHeader=()=>{let e=(0,i.useRouter)(),{user:t,signOut:s}=(0,c.aC)();return(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)(l(),{href:"/",children:(0,r.jsx)(d(),{src:o.Z,alt:"Hopwell",width:40,height:40})})}),(0,r.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,r.jsx)(l(),{href:"/trip-planner",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/trip-planner"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Trip Planner"}),(0,r.jsx)(l(),{href:"/my-trips",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/my-trips"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"My Trips"}),(0,r.jsx)(l(),{href:"/profile",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/profile"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Profile"})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:t?(0,r.jsx)("button",{onClick:()=>s(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign out"}):(0,r.jsx)(l(),{href:"/auth/signin",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})})})}},6720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Profile}});var r=s(5893),i=s(8998),a=s(1163),l=s(7294),n=s(5201),d=s(9008),c=s.n(d),o=s(4345),m=s(9044),components_UserCredits=()=>{let[e,t]=(0,l.useState)(null),[s,a]=(0,l.useState)(!0),[d,c]=(0,l.useState)(null),{user:o}=(0,i.aC)();if((0,l.useEffect)(()=>{let fetchCredits=async()=>{if(o)try{a(!0);let{data:e,error:s}=await n.O.from("user_credits").select("*").eq("user_id",o.id).single();if(s){if("PGRST116"===s.code){let e=new Date().getMonth(),s=new Date().getFullYear(),r=new Date(s,e+1,1),{data:i,error:a}=await n.O.from("user_credits").insert([{user_id:o.id,credits_used:0,credits_limit:30,reset_date:r.toISOString()}]).select();if(a)throw a;t(i[0])}else throw s}else t(e)}catch(e){console.error("Error fetching credits:",e),c("Failed to load credits information")}finally{a(!1)}};fetchCredits()},[o]),s)return(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsx)("div",{className:"animate-pulse flex space-x-4",children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]})]})})});if(d)return(0,r.jsx)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:d})})]})});if(!e)return null;let m=e.credits_limit-e.credits_used,x=e.credits_used/e.credits_limit*100,h=new Date(e.reset_date),u=h.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Monthly Credits"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[m," of ",e.credits_limit," credits remaining"]}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(x),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,r.jsx)("div",{className:"h-2.5 rounded-full ".concat(x>85?"bg-red-500":x>65?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(x,"%")}})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:["You've used ",(0,r.jsx)("span",{className:"font-medium",children:e.credits_used})," credits this month."]}),(0,r.jsxs)("p",{className:"mt-1",children:["Your credits will reset on ",(0,r.jsx)("span",{className:"font-medium",children:u}),"."]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-indigo-50 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-indigo-800",children:"Each itinerary generation uses 1 credit. You get 30 credits per month with your free account."})})]})};function Profile(){let{user:e,loading:t}=(0,i.aC)(),s=(0,a.useRouter)(),[d,x]=(0,l.useState)({name:"",email:""}),[h,u]=(0,l.useState)(!1),[g,f]=(0,l.useState)({text:"",type:""}),[p,j]=(0,l.useState)({totalTrips:0,tripsThisMonth:0,favoriteDestination:""});(0,l.useEffect)(()=>{if(!t&&!e){s.push("/auth/signin");return}if(e){var r;x({name:(null===(r=e.user_metadata)||void 0===r?void 0:r.name)||"",email:e.email||""}),fetchUserStats()}},[e,t,s]);let fetchUserStats=async()=>{if(e)try{let{data:t,error:s}=await n.O.from("trips").select("*").eq("user_id",e.id);if(s)throw s;if(t&&t.length>0){let e=t.length,s=new Date,r=new Date(s.getFullYear(),s.getMonth(),1),i=t.filter(e=>{let t=new Date(e.created_at);return t>=r}).length,a={};t.forEach(e=>{e.destination&&(a[e.destination]=(a[e.destination]||0)+1)});let l="",n=0;Object.entries(a).forEach(e=>{let[t,s]=e;s>n&&(n=s,l=t)}),j({totalTrips:e,tripsThisMonth:i,favoriteDestination:l})}}catch(e){console.error("Error fetching user stats:",e)}},handleSubmit=async t=>{t.preventDefault(),u(!0),f({text:"",type:""});try{let{error:t}=await n.O.auth.updateUser({data:{name:d.name}});if(t)throw t;let{error:s}=await n.O.from("profiles").upsert({id:e.id,name:d.name,updated_at:new Date().toISOString()});if(s)throw s;f({text:"Profile updated successfully!",type:"success"})}catch(e){console.error("Error updating profile:",e),f({text:e.message||"Failed to update profile",type:"error"})}finally{u(!1)}};return t?(0,r.jsx)("div",{className:"min-h-screen bg-yellow-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-900"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Your Profile | Hopwell"})}),(0,r.jsx)(o.Z,{}),(0,r.jsx)("main",{className:"min-h-screen bg-yellow-50 py-12",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-indigo-900",children:"Your Profile"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and view your usage"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-indigo-900 px-6 py-4",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Account Information"})}),g.text&&(0,r.jsx)("div",{className:"p-4 ".concat("success"===g.type?"bg-green-50 text-green-800 border-l-4 border-green-400":"bg-red-50 text-red-800 border-l-4 border-red-400"),children:g.text}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"name",name:"name",type:"text",value:d.name,onChange:e=>{let{name:t,value:s}=e.target;x(e=>({...e,[t]:s}))},className:"appearance-none bg-white block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("input",{id:"email",name:"email",type:"email",value:d.email,disabled:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 text-gray-900 sm:text-sm"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Email cannot be changed"})]})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-900 hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:h?"Saving...":"Save Changes"})})]}),(0,r.jsxs)("div",{className:"px-6 py-6 border-t border-gray-200 bg-gray-50",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Account Settings"}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{onClick:async()=>{let e=window.confirm("Are you sure you want to sign out?");e&&(await n.O.auth.signOut(),s.push("/"))},className:"text-indigo-600 hover:text-indigo-800",children:"Sign out of all devices"})})]})]}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Trips"}),(0,r.jsx)("dd",{className:"mt-1 text-3xl font-semibold text-indigo-900",children:p.totalTrips})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Trips This Month"}),(0,r.jsx)("dd",{className:"mt-1 text-3xl font-semibold text-indigo-900",children:p.tripsThisMonth})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Favorite Destination"}),(0,r.jsx)("dd",{className:"mt-1 text-2xl font-semibold text-indigo-900 truncate",children:p.favoriteDestination||"None yet"})]})})})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(components_UserCredits,{}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-indigo-900 px-6 py-4",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your Plan"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"text-lg font-medium text-gray-900",children:"Free Plan"}),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Active"})]}),(0,r.jsxs)("ul",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-green-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-gray-700",children:"30 itinerary generations per month"})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-green-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-gray-700",children:"Basic itinerary customization"})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-green-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-gray-700",children:"Save unlimited trips"})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:()=>alert("Premium plans coming soon!"),className:"w-full inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",children:"Upgrade to Premium"})})]})]})]})]})]})}),(0,r.jsx)(m.Z,{})]})}}},function(e){e.O(0,[675,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);