(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(9557)}])},3874:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.86bc5614.png",height:200,width:1100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAAElBMVEWxtLmgmlCTj0mqn0GdmmjdzF74kXbtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEUlEQVR4nGNgYGBgYWJkZgUAADMAENwjFK0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:1}},9044:function(e,t,s){"use strict";var r=s(5893),i=s(1664),n=s.n(i),l=s(5675),a=s.n(l),d=s(3197),c=s(3874);t.Z=()=>(0,r.jsx)("footer",{className:"bg-yellow-50 border-t border-base-content/10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-24",children:(0,r.jsxs)("div",{className:" flex lg:items-start md:flex-row md:flex-nowrap flex-wrap flex-col",children:[(0,r.jsxs)("div",{className:"w-64 flex-shrink-0 md:mx-0 mx-auto text-center md:text-left",children:[(0,r.jsxs)(n(),{href:"/#","aria-current":"page",className:"flex gap-2 justify-center md:justify-start items-center",children:[(0,r.jsx)(a(),{src:c.Z,alt:"ShipFast logo",priority:!0,className:"w-6 h-6",width:24,height:24}),(0,r.jsx)("strong",{className:"font-extrabold tracking-tight text-base md:text-lg",children:"Hopwell"})]}),(0,r.jsx)("p",{className:"mt-3 text-sm text-base-content/80 text-gray-500",children:"Travel made so easy, you already plan your next trip."}),(0,r.jsxs)("p",{className:"mt-3 text-sm text-base-content/60 text-gray-500",children:["Copyright \xa9 ",new Date().getFullYear()," - All rights reserved"]})]}),(0,r.jsxs)("div",{className:"flex-grow flex flex-wrap justify-center -mb-10 md:mt-0 mt-10 text-center ",children:[(0,r.jsxs)("div",{className:"lg:w-1/3 md:w-1/2 w-full px-4",children:[(0,r.jsx)("div",{className:"footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3 text-gray-700",children:"LINKS"}),(0,r.jsx)("div",{className:"flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm",children:d.Z.mailgun.supportEmail&&(0,r.jsx)("a",{href:"mailto:".concat(d.Z.mailgun.supportEmail),target:"_blank",className:"link link-hover","aria-label":"Contact Support",children:"Support"})})]}),(0,r.jsxs)("div",{className:"lg:w-1/3 md:w-1/2 w-full px-4",children:[(0,r.jsx)("div",{className:"footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3 text-gray-700",children:"LEGAL"}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm",children:[(0,r.jsx)(n(),{href:"/tos",className:"link link-hover",children:"Terms of services"}),(0,r.jsx)(n(),{href:"/privacy-policy",className:"link link-hover",children:"Privacy policy"})]})]})]})]})})})},9505:function(e,t,s){"use strict";var r=s(5893),i=s(7294),n=s(1163),l=s(1664),a=s.n(l),d=s(5675),c=s.n(d),o=s(8998),x=s(5201),m=s(3874);t.Z=()=>{let e=(0,n.useRouter)(),{user:t,signOut:s}=(0,o.a)(),[l,d]=(0,i.useState)(0);(0,i.useEffect)(()=>{t&&fetchUserCredits()},[t]);let fetchUserCredits=async()=>{try{let{data:e,error:s}=await x.O.from("user_credits").select("credits").eq("user_id",t.id).single();if(s){console.error("Error fetching user credits:",s);return}d((null==e?void 0:e.credits)||0)}catch(e){console.error("Error fetching user credits:",e)}};return(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)(a(),{href:"/",children:(0,r.jsx)(c(),{src:m.Z,alt:"Hopwell",width:40,height:40})})}),(0,r.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,r.jsx)(a(),{href:"/trip-planner",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/trip-planner"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Trip Planner"}),(0,r.jsx)(a(),{href:"/my-trips",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/my-trips"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"My Trips"}),(0,r.jsx)(a(),{href:"/profile",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/profile"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Profile"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[t&&(0,r.jsxs)("div",{className:"bg-indigo-50 px-3 py-1 rounded-md text-indigo-700 flex items-center",children:[(0,r.jsx)("span",{className:"text-xs font-medium mr-1",children:"Credits:"}),(0,r.jsx)("span",{className:"font-bold",children:l})]}),t?(0,r.jsx)("button",{onClick:()=>s(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign out"}):(0,r.jsx)(a(),{href:"/auth/signin",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})]})]})})})}},9557:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ProfilePage}});var r=s(5893),i=s(7294),n=s(1163),l=s(9008),a=s.n(l),d=s(9505),c=s(9044),o=s(5201),x=s(8998);function ProfilePage(){var e;let{user:t}=(0,x.a)(),s=(0,n.useRouter)(),[l,m]=(0,i.useState)(null),[h,g]=(0,i.useState)(!0),[p,u]=(0,i.useState)([]),[f,j]=(0,i.useState)(0),[b,N]=(0,i.useState)(""),[v,y]=(0,i.useState)("free"),[w,k]=(0,i.useState)(!1),[A,_]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t||h||s.push("/auth/signin"),t&&(fetchProfileData(),fetchUserTrips(),fetchUserCredits())},[t,h]);let fetchProfileData=async()=>{try{let{data:e,error:s}=await o.O.from("profiles").select("*").eq("id",t.id).single();if(s)throw s;let r={...e,trips_count:e.trips_count||0,countries_visited:e.countries_visited||0};m(r)}catch(e){console.error("Error fetching profile:",e)}finally{g(!1)}},fetchUserTrips=async()=>{try{let{data:e,error:s}=await o.O.from("trips").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(s)throw s;u(e||[])}catch(e){console.error("Error fetching trips:",e)}},fetchUserCredits=async()=>{try{let{data:e,error:s}=await o.O.from("user_credits").select("credits, last_credit_reset, subscription_tier").eq("user_id",t.id).single();if(s){console.error("Error fetching user credits:",s),j(0);return}j((null==e?void 0:e.credits)||0),y((null==e?void 0:e.subscription_tier)||"free");let r=(null==e?void 0:e.last_credit_reset)?new Date(e.last_credit_reset):new Date,i=new Date(r);i.setMonth(i.getMonth()+1),i.setDate(1),N(i.toLocaleDateString())}catch(e){console.error("Error fetching user credits:",e),j(0)}},handleUpgradeSubscription=async e=>{_(!0);try{let{error:s}=await o.O.from("user_credits").update({subscription_tier:e,credits:"pro"===e?100:30,last_credit_reset:new Date().toISOString()}).eq("user_id",t.id);if(s)throw s;fetchUserCredits(),k(!1),alert("Successfully upgraded to ".concat(e.toUpperCase()," plan!"))}catch(e){console.error("Error upgrading subscription:",e),alert("Failed to upgrade subscription. Please try again.")}finally{_(!1)}};return h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{}),(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-900"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"My Profile | Hopwell"})}),(0,r.jsx)(d.Z,{}),w&&(0,r.jsx)(()=>(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Upgrade Your Plan"}),(0,r.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-500",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition cursor-pointer",onClick:()=>handleUpgradeSubscription("free"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h3",{className:"font-medium text-lg",children:"Free Plan"}),(0,r.jsx)("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm",children:"Current"})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Perfect for occasional travelers"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-500",children:[(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"30 free credits per month"]}),(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Basic itinerary generation"]})]}),(0,r.jsxs)("div",{className:"mt-4 text-center",children:[(0,r.jsx)("span",{className:"font-bold text-2xl",children:"$0"}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"/month"})]})]}),(0,r.jsxs)("div",{className:"border border-indigo-200 rounded-lg p-4 bg-indigo-50 hover:shadow-md transition cursor-pointer",onClick:()=>handleUpgradeSubscription("pro"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h3",{className:"font-medium text-lg",children:"Pro Plan"}),(0,r.jsx)("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-sm",children:"Recommended"})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"For frequent travelers and professionals"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-500",children:[(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"100 credits per month"]}),(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Advanced itinerary options"]}),(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Priority customer support"]})]}),(0,r.jsxs)("div",{className:"mt-4 text-center",children:[(0,r.jsx)("span",{className:"font-bold text-2xl",children:"$9.99"}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"/month"})]})]})]}),(0,r.jsx)("div",{className:"mt-6 text-center text-gray-500 text-sm",children:"By upgrading, you agree to our terms of service and privacy policy."})]})})}),{}),(0,r.jsx)("div",{className:"bg-gray-50 min-h-screen",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"md:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-indigo-700 text-white p-6",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Account Settings"})}),(0,r.jsx)("div",{className:"p-6",children:l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"h-20 w-20 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 text-2xl font-bold mx-auto mb-4",children:l.full_name?l.full_name.charAt(0).toUpperCase():(null==t?void 0:null===(e=t.email)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"}),(0,r.jsx)("h3",{className:"text-center font-semibold text-lg mb-1",children:l.full_name||"Traveler"}),(0,r.jsx)("p",{className:"text-center text-gray-500 text-sm",children:l.email||t.email})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Current Plan"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("pro"===v?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:"pro"===v?"Pro":"Free"}),(0,r.jsx)("button",{onClick:()=>k(!0),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"pro"===v?"Manage Plan":"Upgrade"})]})]})]})})]})}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden mb-6",children:[(0,r.jsx)("div",{className:"bg-indigo-700 text-white p-6",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Travel Statistics"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:(null==l?void 0:l.trips_count)||0}),(0,r.jsx)("p",{className:"text-gray-600",children:"Trips Planned"})]}),(0,r.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:(null==l?void 0:l.countries_visited)||0}),(0,r.jsx)("p",{className:"text-gray-600",children:"Countries"})]}),(0,r.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:f||0}),(0,r.jsx)("p",{className:"text-gray-600",children:"Credits"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden mb-6",children:[(0,r.jsx)("div",{className:"bg-indigo-700 text-white p-6",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Your Credits"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-gray-700",children:["You get",(0,r.jsx)("span",{className:"font-semibold text-indigo-600 mx-1",children:"pro"===v?"100":"30"}),"credits each month"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Next reset: ",b]})]}),(0,r.jsxs)("div",{className:"mt-4 md:mt-0 flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>s.push("/trip-planner"),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Plan a Trip"}),(0,r.jsx)("button",{onClick:()=>k(!0),className:"px-4 py-2 rounded border hover:bg-gray-50 ".concat("pro"===v?"border-gray-300 text-gray-700":"border-indigo-600 text-indigo-600"),children:"pro"===v?"Manage Plan":"Get More Credits"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-indigo-700 text-white p-6",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Recent Trips"})}),(0,r.jsxs)("div",{className:"p-6",children:[p.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.title||"Untitled Trip"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.start_date&&e.end_date?"".concat(new Date(e.start_date).toLocaleDateString()," - ").concat(new Date(e.end_date).toLocaleDateString()):"No dates specified"}),(0,r.jsx)("button",{onClick:()=>s.push("/my-trips/".concat(e.id)),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View details →"})]},e.id))}):(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:"You haven't planned any trips yet."}),(0,r.jsx)("button",{onClick:()=>s.push("/trip-planner"),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Plan Your First Trip"})]}),p.length>4&&(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)("button",{onClick:()=>s.push("/my-trips"),className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"View All Trips →"})})]})]})]})]})})}),(0,r.jsx)(c.Z,{})]})}}},function(e){e.O(0,[675,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);