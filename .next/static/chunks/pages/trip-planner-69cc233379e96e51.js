(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{3095:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trip-planner",function(){return r(3865)}])},3874:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.86bc5614.png",height:200,width:1100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAAElBMVEWxtLmgmlCTj0mqn0GdmmjdzF74kXbtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEUlEQVR4nGNgYGBgYWJkZgUAADMAENwjFK0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:1}},9044:function(e,t,r){"use strict";var s=r(5893),n=r(1664),i=r.n(n),a=r(5675),l=r.n(a),o=r(3197),d=r(3874);t.Z=()=>(0,s.jsx)("footer",{className:"bg-yellow-50 border-t border-base-content/10",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-24",children:(0,s.jsxs)("div",{className:" flex lg:items-start md:flex-row md:flex-nowrap flex-wrap flex-col",children:[(0,s.jsxs)("div",{className:"w-64 flex-shrink-0 md:mx-0 mx-auto text-center md:text-left",children:[(0,s.jsxs)(i(),{href:"/#","aria-current":"page",className:"flex gap-2 justify-center md:justify-start items-center",children:[(0,s.jsx)(l(),{src:d.Z,alt:"ShipFast logo",priority:!0,className:"w-6 h-6",width:24,height:24}),(0,s.jsx)("strong",{className:"font-extrabold tracking-tight text-base md:text-lg",children:"Hopwell"})]}),(0,s.jsx)("p",{className:"mt-3 text-sm text-base-content/80 text-gray-500",children:"Travel made so easy, you already plan your next trip."}),(0,s.jsxs)("p",{className:"mt-3 text-sm text-base-content/60 text-gray-500",children:["Copyright \xa9 ",new Date().getFullYear()," - All rights reserved"]})]}),(0,s.jsxs)("div",{className:"flex-grow flex flex-wrap justify-center -mb-10 md:mt-0 mt-10 text-center ",children:[(0,s.jsxs)("div",{className:"lg:w-1/3 md:w-1/2 w-full px-4",children:[(0,s.jsx)("div",{className:"footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3 text-gray-700",children:"LINKS"}),(0,s.jsx)("div",{className:"flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm",children:o.Z.mailgun.supportEmail&&(0,s.jsx)("a",{href:"mailto:".concat(o.Z.mailgun.supportEmail),target:"_blank",className:"link link-hover","aria-label":"Contact Support",children:"Support"})})]}),(0,s.jsxs)("div",{className:"lg:w-1/3 md:w-1/2 w-full px-4",children:[(0,s.jsx)("div",{className:"footer-title font-semibold text-base-content tracking-widest text-sm md:text-left mb-3 text-gray-700",children:"LEGAL"}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center md:items-start gap-2 mb-10 text-sm",children:[(0,s.jsx)(i(),{href:"/tos",className:"link link-hover",children:"Terms of services"}),(0,s.jsx)(i(),{href:"/privacy-policy",className:"link link-hover",children:"Privacy policy"})]})]})]})]})})})},9505:function(e,t,r){"use strict";var s=r(5893),n=r(7294),i=r(1163),a=r(1664),l=r.n(a),o=r(5675),d=r.n(o),c=r(8998),m=r(5201),g=r(3874);t.Z=()=>{let e=(0,i.useRouter)(),{user:t,signOut:r}=(0,c.a)(),[a,o]=(0,n.useState)(0);(0,n.useEffect)(()=>{t&&fetchUserCredits()},[t]);let fetchUserCredits=async()=>{try{let{data:e,error:r}=await m.O.from("user_credits").select("credits").eq("user_id",t.id).single();if(r){console.error("Error fetching user credits:",r);return}o((null==e?void 0:e.credits)||0)}catch(e){console.error("Error fetching user credits:",e)}};return(0,s.jsx)("header",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)(d(),{src:g.Z,alt:"Hopwell",width:40,height:40})})}),(0,s.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,s.jsx)(l(),{href:"/trip-planner",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/trip-planner"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Trip Planner"}),(0,s.jsx)(l(),{href:"/my-trips",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/my-trips"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"My Trips"}),(0,s.jsx)(l(),{href:"/profile",className:"inline-flex items-center px-1 pt-1 border-b-2 ".concat("/profile"===e.pathname?"border-indigo-500 text-sm font-medium text-gray-900":"border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Profile"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[t&&(0,s.jsxs)("div",{className:"bg-indigo-50 px-3 py-1 rounded-md text-indigo-700 flex items-center",children:[(0,s.jsx)("span",{className:"text-xs font-medium mr-1",children:"Credits:"}),(0,s.jsx)("span",{className:"font-bold",children:a})]}),t?(0,s.jsx)("button",{onClick:()=>r(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign out"}):(0,s.jsx)(l(),{href:"/auth/signin",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})]})]})})})}},3865:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return TripPlanner}});var s=r(5893),n=r(7294),i=r(1163),a=r(9008),l=r.n(a),o=r(9505),d=r(9044),c=r(1988);r(5890);var m=r(8998),g=r(5201);let checkUserCredits=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{let{data:r,error:s}=await g.O.from("user_credits").select("credits, last_credit_reset").eq("user_id",e).single();if(s){if("PGRST116"===s.code){let r=new Date,{data:s,error:n}=await g.O.from("user_credits").insert([{user_id:e,credits:30,last_credit_reset:r.toISOString()}]).select();if(n)throw n;return{hasEnoughCredits:!0,currentCredits:30,requiredCredits:t}}throw s}let n=(null==r?void 0:r.credits)||0,i=(null==r?void 0:r.last_credit_reset)?new Date(r.last_credit_reset):null,a=new Date,l=!i||a.getMonth()!==i.getMonth()||a.getFullYear()!==i.getFullYear();if(l){let{error:t}=await g.O.from("user_credits").update({credits:30,last_credit_reset:a.toISOString()}).eq("user_id",e);if(t)throw t;n=30}return{hasEnoughCredits:n>=t,currentCredits:n,requiredCredits:t}}catch(e){throw console.error("Error checking user credits:",e),e}},u=["Beaches & Relaxation","Culture & History","Food & Dining","Nature & Outdoors","Adventure & Sports","Nightlife & Entertainment","Shopping","Arts & Museums","Family Friendly","Local Experiences"];function TripPlanner(){let{user:e}=(0,m.a)(),t=(0,i.useRouter)(),[r,a]=(0,n.useState)(0),[x,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(!1),[b,y]=(0,n.useState)({destination:"",startDate:null,endDate:null,budget:"moderate",interests:[],groupType:"solo",groupCount:1}),[j,v]=(0,n.useState)({}),[w,N]=(0,n.useState)(!1),[C,A]=(0,n.useState)("");(0,n.useEffect)(()=>{e&&fetchUserCredits()},[e]);let fetchUserCredits=async()=>{try{let t=await checkUserCredits(e.id,0);a(t.currentCredits);let{data:r,error:s}=await g.O.from("user_credits").select("last_credit_reset").eq("user_id",e.id).single();if(s)throw s;let n=(null==r?void 0:r.last_credit_reset)?new Date(r.last_credit_reset):new Date,i=new Date(n);i.setMonth(i.getMonth()+1),i.setDate(1),h(i.toLocaleDateString()),f(!0)}catch(e){console.error("Error fetching user credits:",e),a(0),f(!0)}},validateForm=()=>{let e={};return b.destination.trim()||(e.destination="Destination is required"),v(e),0===Object.keys(e).length},handleChange=e=>{let{name:t,value:r}=e.target;y(e=>({...e,[t]:r}))},handleDateChange=(e,t)=>{y(r=>({...r,[e]:t}))},handleInterestChange=e=>{y(t=>{let r=[...t.interests];return r.includes(e)?{...t,interests:r.filter(t=>t!==e)}:{...t,interests:[...r,e]}})},handleSubmit=async s=>{if(s.preventDefault(),!e){t.push("/auth/signin?redirect=trip-planner");return}if(r<1){A("You don't have enough credits to generate an itinerary.");return}if(validateForm()){N(!0),A("");try{localStorage.setItem("tripFormData",JSON.stringify(b));let e=await fetch("/api/generate-itinerary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to generate itinerary");void 0!==r.creditsRemaining?a(r.creditsRemaining):a(e=>Math.max(0,e-1)),localStorage.setItem("itineraryAndBudget",r.itinerary),t.push("/plan-my-trip/results")}catch(e){console.error("Error generating itinerary:",e),A(e.message||"Failed to generate itinerary. Please try again.")}finally{N(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"Plan Your Trip | Hopwell"})}),(0,s.jsx)(o.Z,{}),(0,s.jsx)("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Plan Your Dream Trip"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Tell us about your travel preferences and we'll create a personalized itinerary"})]}),p&&(0,s.jsx)("div",{className:"mb-6 text-center",children:(0,s.jsxs)("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-indigo-50 text-indigo-700",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"You get ",(0,s.jsx)("span",{className:"font-bold mx-1",children:"30"})," free credits each month. Next reset: ",x]})}),C&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg",children:C}),(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 md:p-8",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"destination",className:"block text-gray-700 font-medium mb-2",children:"Where do you want to go?"}),(0,s.jsx)("input",{type:"text",id:"destination",name:"destination",value:b.destination,onChange:handleChange,placeholder:"City, Country, or Region",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition\n                       bg-white text-gray-900 ".concat(j.destination?"border-red-500":"border-gray-300")}),j.destination&&(0,s.jsx)("p",{className:"mt-1 text-red-500 text-sm",children:j.destination})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"block text-gray-700 font-medium mb-2",children:"Start Date"}),(0,s.jsx)(c.ZP,{id:"startDate",selected:b.startDate,onChange:e=>handleDateChange("startDate",e),selectsStart:!0,startDate:b.startDate,endDate:b.endDate,minDate:new Date,placeholderText:"Select start date",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white text-gray-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"block text-gray-700 font-medium mb-2",children:"End Date"}),(0,s.jsx)(c.ZP,{id:"endDate",selected:b.endDate,onChange:e=>handleDateChange("endDate",e),selectsEnd:!0,startDate:b.startDate,endDate:b.endDate,minDate:b.startDate||new Date,placeholderText:"Select end date",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white text-gray-900"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Budget"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4",children:["budget","moderate","luxury"].map(e=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"radio",id:e,name:"budget",value:e,checked:b.budget===e,onChange:handleChange,className:"sr-only"}),(0,s.jsx)("label",{htmlFor:e,className:"block p-3 text-center border rounded-lg cursor-pointer transition ".concat(b.budget===e?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 hover:border-indigo-300"),children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Interests (Select all that apply)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:u.map(e=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"checkbox",id:e,name:"interests",value:e,checked:b.interests.includes(e),onChange:()=>handleInterestChange(e),className:"sr-only"}),(0,s.jsx)("label",{htmlFor:e,className:"block p-3 text-center border rounded-lg cursor-pointer text-sm transition ".concat(b.interests.includes(e)?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 hover:border-indigo-300"),children:e})]},e))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"groupType",className:"block text-gray-700 font-medium mb-2",children:"Traveling As"}),(0,s.jsxs)("select",{id:"groupType",name:"groupType",value:b.groupType,onChange:handleChange,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white text-gray-900",children:[(0,s.jsx)("option",{value:"solo",children:"Solo Traveler"}),(0,s.jsx)("option",{value:"couple",children:"Couple"}),(0,s.jsx)("option",{value:"family",children:"Family"}),(0,s.jsx)("option",{value:"friends",children:"Friends"}),(0,s.jsx)("option",{value:"business",children:"Business"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"groupCount",className:"block text-gray-700 font-medium mb-2",children:"Number of Travelers"}),(0,s.jsx)("input",{type:"number",id:"groupCount",name:"groupCount",value:b.groupCount,onChange:handleChange,min:"1",max:"20",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white text-gray-900"})]})]})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-6 flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:r>0?(0,s.jsx)("span",{children:"This will use 1 credit from your monthly allowance"}):(0,s.jsx)("span",{className:"text-red-500",children:"You need at least 1 credit to generate an itinerary"})}),(0,s.jsx)("button",{type:"submit",disabled:w||r<1,className:"px-6 py-3 rounded-lg font-medium flex items-center ".concat(w||r<1?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"),children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Create My Itinerary"})]})]})]})})}),(0,s.jsx)(d.Z,{})]})}}},function(e){e.O(0,[342,644,675,655,774,888,179],function(){return e(e.s=3095)}),_N_E=e.O()}]);