(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{6742:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return t(9027)}])},3874:function(e,s){"use strict";s.Z={src:"/_next/static/media/logo.86bc5614.png",height:200,width:1100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAAElBMVEWxtLmgmlCTj0mqn0GdmmjdzF74kXbtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEUlEQVR4nGNgYGBgYWJkZgUAADMAENwjFK0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:1}},9027:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ResetPassword}});var r=t(5893),a=t(7294),n=t(1163),o=t(1664),i=t.n(o),d=t(5675),l=t.n(d),c=t(3874);function ResetPassword(){let e=(0,n.useRouter)(),{token:s}=e.query,[t,o]=(0,a.useState)({password:"",confirmPassword:""}),[d,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[x,w]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let verifyToken=async()=>{if(s)try{let e=await fetch("/api/auth/verify-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s})});e.ok?f(!0):(h("Invalid or expired token. Please request a new password reset."),f(!1))}catch(e){h("An error occurred. Please try again."),f(!1)}};s&&verifyToken()},[s]);let handleChange=e=>{let{name:s,value:t}=e.target;o(e=>({...e,[s]:t}))},handleSubmit=async r=>{if(r.preventDefault(),m(!0),h(""),t.password!==t.confirmPassword){h("Passwords don't match"),m(!1);return}try{let r=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,password:t.password})}),a=await r.json();if(!r.ok)throw Error(a.error||"Something went wrong");w(!0),h("Your password has been reset successfully."),setTimeout(()=>{e.push("/auth/signin")},3e3)}catch(e){w(!1),h(e.message)}finally{m(!1)}};return s?(0,r.jsxs)("div",{className:"min-h-screen bg-yellow-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(i(),{href:"/",children:(0,r.jsx)(l(),{src:c.Z,alt:"Hopwell",width:80,height:80,className:"mx-auto"})})}),(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-indigo-900",children:"Reset your password"})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[u&&(0,r.jsx)("div",{className:"".concat(x?"bg-green-50 border-green-400":"bg-red-50 border-red-400"," border-l-4 p-4 mb-6"),children:(0,r.jsx)("div",{className:"text-sm ".concat(x?"text-green-700":"text-red-700"),children:u})}),!g&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-4",children:"Invalid or expired token."}),(0,r.jsx)(i(),{href:"/auth/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"Request a new password reset"})]}),g&&!x&&(0,r.jsxs)("form",{className:"space-y-6",onSubmit:handleSubmit,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:handleChange,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t.confirmPassword,onChange:handleChange,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-900 hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:d?"Resetting...":"Reset Password"})})]}),x&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-4",children:"Your password has been reset successfully. Redirecting to login..."}),(0,r.jsx)(i(),{href:"/auth/signin",className:"text-indigo-600 hover:text-indigo-500",children:"Go to login"})]})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-yellow-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(l(),{src:c.Z,alt:"Hopwell",width:80,height:80,className:"mx-auto"})}),(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-indigo-900",children:"Reset your password"})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 text-center",children:(0,r.jsx)("p",{children:"Loading..."})})})]})}}},function(e){e.O(0,[675,774,888,179],function(){return e(e.s=6742)}),_N_E=e.O()}]);