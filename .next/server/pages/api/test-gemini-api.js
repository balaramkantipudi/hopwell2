"use strict";(()=>{var e={};e.id=1859,e.ids=[1859],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3023:e=>{e.exports=import("@google/generative-ai")},3395:(e,t,o)=>{o.a(e,async(e,s)=>{try{o.r(t),o.d(t,{config:()=>d,default:()=>c,routeModule:()=>m});var n=o(1802),i=o(7153),a=o(6249),r=o(3386),l=e([r]);r=(l.then?(await l)():l)[0];let c=(0,a.l)(r,"default"),d=(0,a.l)(r,"config"),m=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/test-gemini-api",pathname:"/api/test-gemini-api",bundlePath:"",filename:""},userland:r});s()}catch(e){s(e)}})},3386:(e,t,o)=>{o.a(e,async(e,s)=>{try{o.r(t),o.d(t,{default:()=>handler});var n=o(3023),i=e([n]);async function handler(e,t){t.setHeader("Content-Type","application/json");try{console.log("Testing Gemini API connection...");let e=process.env.GEMINI_API_KEY;if(!e)return t.status(400).json({success:!1,error:"Missing API key",message:"The GEMINI_API_KEY environment variable is not set"});console.log("API key format:",e.substring(0,4)+"...");let o=new n.GoogleGenerativeAI(e);console.log("Listing available models...");try{let e=await o.listModels();console.log("Available models:",e)}catch(e){console.log("Could not list models:",e.message)}let s=null,i=null;for(let e of["gemini-pro","gemini-1.0-pro","gemini-1.5-pro","gemini-1.5-flash"])try{console.log(`Attempting to use model: ${e}`);let t=o.getGenerativeModel({model:e});console.log("Sending test prompt to Gemini API...");let n=await t.generateContent("What's the capital of France? Keep your answer to one word only."),a=await n.response;if(s=a.text(),i=e,console.log("Received response from Gemini API:",s),s)break}catch(t){console.log(`Error with model ${e}:`,t.message)}if(s)return t.status(200).json({success:!0,message:"Gemini API is working correctly",response:s,modelUsed:i});throw Error("All model attempts failed")}catch(e){return console.error("Gemini API test failed:",e),t.status(500).json({success:!1,error:"Gemini API test failed",message:e.message,stack:e.stack,details:"Check your API key and network connection, or try using a different Gemini model version"})}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),o=t.X(0,[4222],()=>__webpack_exec__(3395));module.exports=o})();