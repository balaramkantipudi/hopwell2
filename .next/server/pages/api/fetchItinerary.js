"use strict";(()=>{var e={};e.id=8042,e.ids=[8042],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3432:(e,t,a)=>{a.r(t),a.d(t,{config:()=>i,default:()=>r,routeModule:()=>l});var o={};a.r(o),a.d(o,{default:()=>handler});var s=a(1802),n=a(7153),p=a(6249);async function fetchAI21Response(e){console.log("Data:",e);let t=`Act as a trip planner, scheduler, and a finance manager, and provide a detailed trip itinerary in a human readable form with approximate cost per item based on the following information: ${JSON.stringify(e)}`;console.log("Prompt:",t);let a={method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:`Bearer ${process.env.AI21_API_KEY}`},body:JSON.stringify({numResults:1,maxTokens:1e3,minTokens:0,temperature:.7,topP:1,topKReturn:0,frequencyPenalty:{scale:1,applyToWhitespaces:!0,applyToPunctuations:!0,applyToNumbers:!0,applyToStopwords:!0,applyToEmojis:!0},presencePenalty:{scale:0,applyToWhitespaces:!0,applyToPunctuations:!0,applyToNumbers:!0,applyToStopwords:!0,applyToEmojis:!0},countPenalty:{scale:0,applyToWhitespaces:!0,applyToPunctuations:!0,applyToNumbers:!0,applyToStopwords:!0,applyToEmojis:!0},prompt:t})},o=await fetch("https://api.ai21.com/studio/v1/j2-ultra/complete",a);if(!o.ok){let e=await o.text();throw console.error("AI21 API Error:",e),Error("Failed to fetch AI21 response")}let s=await o.json();return console.log("Response Data:",s),s.completions[0].data.text}async function handler(e,t){if("POST"===e.method)try{let a=e.body,o=await fetchAI21Response(a);t.status(200).json({text:o})}catch(e){t.status(500).json({error:e.message})}else t.setHeader("Allow",["POST"]),t.status(405).end(`Method ${e.method} Not Allowed`)}let r=(0,p.l)(o,"default"),i=(0,p.l)(o,"config"),l=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/fetchItinerary",pathname:"/api/fetchItinerary",bundlePath:"",filename:""},userland:o})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[4222],()=>__webpack_exec__(3432));module.exports=a})();