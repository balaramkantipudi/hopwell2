"use strict";(()=>{var e={};e.id=6048,e.ids=[6048],e.modules={8769:e=>{e.exports=require("daisyui/src/theming/themes.js")},8941:e=>{e.exports=require("form-data")},8557:e=>{e.exports=require("mailgun.js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1689:(e,r,s)=>{s.r(r),s.d(r,{config:()=>c,default:()=>l,routeModule:()=>w});var t={};s.r(t),s.d(t,{default:()=>handler});var a=s(1802),o=s(7153),i=s(6249),n=s(6548);let d=require("crypto");var u=s.n(d),p=s(2110);async function handler(e,r){if("POST"!==e.method)return r.status(405).json({error:"Method not allowed"});try{let{email:s}=e.body;if(!s)return r.status(400).json({error:"Email is required"});let{data:t,error:a}=await n.O.auth.admin.getUserByEmail(s);if(a)return r.status(200).json({message:"If an account with that email exists, password reset instructions have been sent"});let o=u().randomBytes(32).toString("hex"),i=new Date(Date.now()+36e5),{error:d}=await n.O.from("password_reset_tokens").insert([{user_id:t.id,email:s,token:o,expires_at:i.toISOString()}]);if(d)return console.error("Token storage error:",d),r.status(500).json({error:"Server error"});let l=`${process.env.NEXTAUTH_URL}/auth/reset-password?token=${o}`;return await (0,p.C)(s,"Reset your HOPWELL password",`You requested a password reset. Please go to this link to reset your password: ${l}`,`
        <div style="max-width: 600px; margin: 0 auto; padding: 20px;">
          <h2 style="color: #312e81; margin-bottom: 20px;">Reset Your HOPWELL Password</h2>
          <p>You requested a password reset. Please click the button below to reset your password:</p>
          <div style="text-align: center; margin: 30px 0;">
            <a href="${l}" style="background-color: #312e81; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">Reset Password</a>
          </div>
          <p>If you didn't request a password reset, you can safely ignore this email.</p>
          <p>The link will expire in 1 hour.</p>
        </div>
      `),r.status(200).json({message:"Password reset instructions sent"})}catch(e){return console.error("Password reset error:",e),r.status(500).json({error:"Server error"})}}let l=(0,i.l)(t,"default"),c=(0,i.l)(t,"config"),w=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/auth/forgot-password",pathname:"/api/auth/forgot-password",bundlePath:"",filename:""},userland:t})},6548:(e,r,s)=>{s.d(r,{O:()=>a});let t=require("@supabase/supabase-js"),a=(0,t.createClient)("https://qlcenpzwdvvtcnblixyp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsY2VucHp3ZHZ2dGNuYmxpeHlwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYzOTY4MTMsImV4cCI6MjA2MTk3MjgxM30.B332OjGROnVxsSKra9T_Uh6fQvVdhOH21z7731pc1Kk")}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[4222,2110],()=>__webpack_exec__(1689));module.exports=s})();